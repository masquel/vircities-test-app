{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","../src/js/app.js","app.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","app","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","./src/js/app.js","_dereq_","baseClass","baseClassSelector","localStorageKey","tagPattern","RegExp","searchInput","document","querySelector","searchButton","searchResult","searchMessage","addToLocalStorage","tag","message","messageItem","messages","localStorage","JSON","parse","push","stringify","findInLocalStorage","filter","displaySearchResult","searchResultItems","searchResultItemsHTML","map","item","innerHTML","join","classList","remove","hideSearchResult","add","parseInputValue","value","test","match","searchInputHandler","target","result","searchButtonHandler","preventDefault","trim","style","opacity","setTimeout","ifEnter","keyCode","click","init","addEventListener"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\r\n\r\nconst baseClass = 'vircities-search';\r\nconst baseClassSelector = '.'+baseClass;\r\nconst localStorageKey = 'vircitiesMessages';\r\nconst tagPattern = new RegExp(/^#(\\[[^\\]]+\\]|\\S+)([\\s\\S]*)?/);\r\n\r\nconst searchInput = document.querySelector(baseClassSelector+\"__input\");\r\nconst searchButton = document.querySelector(baseClassSelector+\"__button\");\r\nconst searchResult = document.querySelector(baseClassSelector+\"__result\");\r\nconst searchMessage = document.querySelector(baseClassSelector+\"__message\");\r\n\r\nconst addToLocalStorage = (tag, message) => {\r\n\tlet messageItem = {\r\n\t\ttag,\r\n\t\tmessage\r\n\t};\r\n\tlet messages = localStorage[localStorageKey];\r\n\r\n\tmessages = JSON.parse(messages);\r\n\tmessages.push(messageItem);\r\n\r\n\tmessages = JSON.stringify(messages);\r\n\r\n\tlocalStorage[localStorageKey] = messages;\r\n}\r\n\r\nconst findInLocalStorage = (tag) => {\r\n\r\n\tlet messages = localStorage[localStorageKey];\r\n\r\n\tmessages = JSON.parse(messages);\r\n\r\n\treturn messages.filter(\r\n\t\tmessage => {\r\n\t\t\treturn message.tag === tag;\r\n\t\t}\r\n\t);\r\n}\r\n\r\nconst displaySearchResult = (tag) => {\r\n\r\n\tlet searchResultItems = findInLocalStorage(tag);\r\n\tif(searchResultItems.length > 0){\t\r\n\t\tlet searchResultItemsHTML = searchResultItems.map(\r\n\t\t\titem => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t`<div class=\"${baseClass}__result-item\">\r\n\t\t\t\t\t\t<strong>#${item.tag}</strong> ${item.message}\r\n\t\t\t\t\t</div>`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t);\r\n\t\tsearchResult.innerHTML = searchResultItemsHTML.join('');\r\n\t\tsearchResult.classList.remove(baseClass+\"__result--hidden\");\r\n\t}else{\r\n\t\thideSearchResult()\r\n\t}\r\n}\r\n\r\nconst hideSearchResult = () => {\r\n\tsearchResult.classList.add(baseClass+\"__result--hidden\");\r\n}\r\n\r\nconst parseInputValue = (value) => {\r\n\treturn tagPattern.test(value) ? value.match(tagPattern) : false;\r\n}\r\n\r\nconst searchInputHandler = (e) => {\r\n\tlet value = e.target.value;\r\n\tlet result = parseInputValue(value);\r\n\tif(typeof result[2] === 'undefined' && result){\r\n\t\tdisplaySearchResult(result[1]);\r\n\t}else{\r\n\t\thideSearchResult();\r\n\t}\r\n}\r\n\r\nconst searchButtonHandler = (e) => {\r\n\te.preventDefault();\r\n\r\n\tlet result = parseInputValue(searchInput.value);\r\n\t\r\n\tif(!result || typeof result[2] === 'undefined' || result[2].trim() === ''){\r\n\t\t\r\n\t\tsearchMessage.classList.remove(baseClass+\"__message--hidden\");\r\n\t\tsearchMessage.innerHTML = `<div class=\"${baseClass}__message-error\">Неверный формат: #тег сообщение</div>`;\r\n\t\tsearchMessage.style.opacity = 1;\r\n\t\tsetTimeout(()=>{\r\n\t\t\tsearchMessage.style.opacity = 0;\r\n\t\t},1700)\r\n\t\tsetTimeout(()=>{\r\n\t\t\tsearchMessage.classList.add(baseClass+\"__message--hidden\");\r\n\t\t},3000)\r\n\t}else{\r\n\t\taddToLocalStorage(result[1], result[2].trim());\r\n\t\tsearchMessage.classList.remove(baseClass+\"__message--hidden\");\r\n\t\tsearchMessage.innerHTML = `<div class=\"${baseClass}__message-success\">Сообщение успешно добавлено в localStorage</div>`;\r\n\t\tsearchMessage.style.opacity = 1;\r\n\t\tsetTimeout(()=>{\r\n\t\t\tsearchMessage.style.opacity = 0;\r\n\t\t},1700)\r\n\t\tsetTimeout(()=>{\r\n\t\t\tsearchMessage.classList.add(baseClass+\"__message--hidden\");\r\n\t\t},3000)\r\n\t\tsearchInput.value = \"\";\r\n\t}\r\n\t\r\n}\r\n\r\nconst ifEnter = (e) => {\r\n    e.preventDefault();\r\n    if (e.keyCode == 13) {\r\n    \tsearchButton.click();\r\n    }\r\n}\r\n\r\nconst init = () => {\r\n\tif(typeof localStorage[localStorageKey] === 'undefined') {\r\n\t\tlocalStorage[localStorageKey] = \"[]\";\r\n\t}\r\n\thideSearchResult();\r\n\tsearchInput.addEventListener('input', searchInputHandler);\r\n\tsearchInput.addEventListener('change', searchInputHandler);\r\n\tsearchInput.addEventListener(\"keyup\", ifEnter);\r\n\tsearchButton.addEventListener('click', searchButtonHandler);\r\n\r\n\r\n}\r\n\r\ninit();\r\n\r\n(function(){\r\n\tdocument.addEventListener('DOMContentLoaded', init);\r\n});","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.app = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"./src/js/app.js\":[function(_dereq_,module,exports){\n\"use strict\";\n\nvar baseClass = \"vircities-search\";\nvar baseClassSelector = \".\" + baseClass;\nvar localStorageKey = \"vircitiesMessages\";\nvar tagPattern = new RegExp(/^#(\\[[^\\]]+\\]|\\S+)([\\s\\S]*)?/);\n\nvar searchInput = document.querySelector(baseClassSelector + \"__input\");\nvar searchButton = document.querySelector(baseClassSelector + \"__button\");\nvar searchResult = document.querySelector(baseClassSelector + \"__result\");\nvar searchMessage = document.querySelector(baseClassSelector + \"__message\");\n\nvar addToLocalStorage = function (tag, message) {\n\tvar messageItem = {\n\t\ttag: tag,\n\t\tmessage: message\n\t};\n\tvar messages = localStorage[localStorageKey];\n\n\tmessages = JSON.parse(messages);\n\tmessages.push(messageItem);\n\n\tmessages = JSON.stringify(messages);\n\n\tlocalStorage[localStorageKey] = messages;\n};\n\nvar findInLocalStorage = function (tag) {\n\n\tvar messages = localStorage[localStorageKey];\n\n\tmessages = JSON.parse(messages);\n\n\treturn messages.filter(function (message) {\n\t\treturn message.tag === tag;\n\t});\n};\n\nvar displaySearchResult = function (tag) {\n\n\tvar searchResultItems = findInLocalStorage(tag);\n\tif (searchResultItems.length > 0) {\n\t\tvar searchResultItemsHTML = searchResultItems.map(function (item) {\n\t\t\treturn \"<div class=\\\"\" + baseClass + \"__result-item\\\">\\n\\t\\t\\t\\t\\t\\t<strong>#\" + item.tag + \"</strong> \" + item.message + \"\\n\\t\\t\\t\\t\\t</div>\";\n\t\t});\n\t\tsearchResult.innerHTML = searchResultItemsHTML.join(\"\");\n\t\tsearchResult.classList.remove(baseClass + \"__result--hidden\");\n\t} else {\n\t\thideSearchResult();\n\t}\n};\n\nvar hideSearchResult = function () {\n\tsearchResult.classList.add(baseClass + \"__result--hidden\");\n};\n\nvar parseInputValue = function (value) {\n\treturn tagPattern.test(value) ? value.match(tagPattern) : false;\n};\n\nvar searchInputHandler = function (e) {\n\tvar value = e.target.value;\n\tvar result = parseInputValue(value);\n\tif (typeof result[2] === \"undefined\" && result) {\n\t\tdisplaySearchResult(result[1]);\n\t} else {\n\t\thideSearchResult();\n\t}\n};\n\nvar searchButtonHandler = function (e) {\n\te.preventDefault();\n\n\tvar result = parseInputValue(searchInput.value);\n\n\tif (!result || typeof result[2] === \"undefined\" || result[2].trim() === \"\") {\n\n\t\tsearchMessage.classList.remove(baseClass + \"__message--hidden\");\n\t\tsearchMessage.innerHTML = \"<div class=\\\"\" + baseClass + \"__message-error\\\">Неверный формат: #тег сообщение</div>\";\n\t\tsearchMessage.style.opacity = 1;\n\t\tsetTimeout(function () {\n\t\t\tsearchMessage.style.opacity = 0;\n\t\t}, 1700);\n\t\tsetTimeout(function () {\n\t\t\tsearchMessage.classList.add(baseClass + \"__message--hidden\");\n\t\t}, 3000);\n\t} else {\n\t\taddToLocalStorage(result[1], result[2].trim());\n\t\tsearchMessage.classList.remove(baseClass + \"__message--hidden\");\n\t\tsearchMessage.innerHTML = \"<div class=\\\"\" + baseClass + \"__message-success\\\">Сообщение успешно добавлено в localStorage</div>\";\n\t\tsearchMessage.style.opacity = 1;\n\t\tsetTimeout(function () {\n\t\t\tsearchMessage.style.opacity = 0;\n\t\t}, 1700);\n\t\tsetTimeout(function () {\n\t\t\tsearchMessage.classList.add(baseClass + \"__message--hidden\");\n\t\t}, 3000);\n\t\tsearchInput.value = \"\";\n\t}\n};\n\nvar ifEnter = function (e) {\n\te.preventDefault();\n\tif (e.keyCode == 13) {\n\t\tsearchButton.click();\n\t}\n};\n\nvar init = function () {\n\tif (typeof localStorage[localStorageKey] === \"undefined\") {\n\t\tlocalStorage[localStorageKey] = \"[]\";\n\t}\n\thideSearchResult();\n\tsearchInput.addEventListener(\"input\", searchInputHandler);\n\tsearchInput.addEventListener(\"change\", searchInputHandler);\n\tsearchInput.addEventListener(\"keyup\", ifEnter);\n\tsearchButton.addEventListener(\"click\", searchButtonHandler);\n};\n\ninit();\n\n(function () {\n\tdocument.addEventListener(\"DOMContentLoaded\", init);\n});\n\n},{}]},{},[\"./src/js/app.js\"])(\"./src/js/app.js\")\n});\n\n"],"sourceRoot":"/source/"}